(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),o=n.n(c),s=n(12),i=n(8),l=n(130),p=n(127),d=n(126),u=n(123),h=n(125),j=n(2),m=Object(u.a)((function(e){return{heroContent:{backgroundColor:"#bbdefb",padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)}}})),b=function(){var e=m();return Object(j.jsx)("div",{className:e.heroContent,children:Object(j.jsxs)(h.a,{maxWidth:"sm",align:"center",children:[Object(j.jsx)(d.a,{component:"h1",variant:"h2",color:"textPrimary",gutterBottom:!0,children:"\u4e2d\u56fd\u8a9e\u306e\u304aTomo!"}),Object(j.jsx)(d.a,{variant:"body1",color:"textSecondary",paragraph:!0,children:"\u4e2d\u56fd\u8a9e\u306e\u521d\u5b66\u8005\u304c\u4e0a\u7d1a\u8005\u306b\u306a\u308b\u307e\u3067\u306e\u5b66\u7fd2\u6cd5\u3001\u6559\u6750\u3001\u8b1b\u7fa9\u3001\u3055\u3089\u306b\u306f\u5b66\u7fd2\u7d99\u7d9a\u306e\u305f\u3081\u306e\u30da\u30fc\u30b9\u30e1\u30fc\u30ab\u30fc\u306b\u81f3\u308b\u307e\u3067\u304c\u3053\u3053\u306b\uff01"}),Object(j.jsx)("div",{className:e.heroButtons,children:Object(j.jsx)(p.a,{container:!0,spacing:2,justify:"center",children:Object(j.jsx)(p.a,{item:!0,children:Object(j.jsx)(l.a,{variant:"outlined",color:"primary",component:s.b,to:"/login",children:"Login"})})})})]})})},x=n(22),O=n(6),f=n(18),g=n(13),v=n(15),y=n.n(v),w=n(28),S=n(29),C=n.n(S),N="LOGIN_SUCCESS",_="LOGIN_FAIL",k="LOGIN_SUCCESS",A="LOGIN_FAIL",I="LOGIN_SUCCESS",L="LOGIN_FAIL",E="LOAD_USER_SUCCESS",T="LOAD_USER_FAIL",W="AUTHENTICATED_SUCCESS",F="AUTHENTICATED_FAIL",B="PASSWORD_RESET_SUCCESS",P="PASSWORD_RESET_FAIL",R="PASSWORD_RESET_CONFIRM_SUCCESS",D="PASSWORD_RESET_CONFIRM_FAIL",U="LOGOUT",q=function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=15;break}return n={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,C.a.get("".concat("http://localhost:8000","/auth/users/me/"),n);case 5:a=e.sent,console.log(a.data),t({type:E,payload:a.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:T});case 13:e.next=16;break;case 15:t({type:T});case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},J=n(132),G=n(128),V=n(131),M=n(133),H=Object(u.a)((function(e){return{root:{marginTop:"5px",alignItems:"center"},heroContent:{backgroundColor:"#bbdefb",padding:e.spacing(8,0,6)},formWidth:{width:"400px",margin:"15px"},loginButton:{width:"200px",margin:"20px"}}})),z=Object(g.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var n=Object(w.a)(y.a.mark((function n(a){var r,c,o;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),n.prev=2,n.next=5,C.a.post("".concat("http://localhost:8000","/auth/jwt/create/"),c,r);case 5:o=n.sent,a({type:N,payload:o.data}),a(q()),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),a({type:_});case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.isAuthenticated,r=H(),c=Object(a.useState)({email:"",password:""}),o=Object(f.a)(c,2),u=o[0],m=o[1],b=u.email,g=u.password,v=function(e){return m(Object(O.a)(Object(O.a)({},u),{},Object(x.a)({},e.target.name,e.target.value)))};return n?Object(j.jsx)(i.a,{to:"/"}):Object(j.jsx)("div",{className:r.heroContent,children:Object(j.jsxs)(h.a,{maxWidth:"sm",align:"center",children:[Object(j.jsx)(d.a,{variant:"h2",style:{marginBottom:"40px"},children:"Sign In"}),Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(b,g)}(e)},className:r.root,noValidate:!0,autoComplete:"off",children:[Object(j.jsx)(p.a,{children:Object(j.jsxs)(J.a,{className:r.formWidth,children:[Object(j.jsx)(M.a,{htmlFor:"component-helper",children:"Email"}),Object(j.jsx)(V.a,{id:"component-helper",type:"email",name:"email",placeholder:"Email",value:b,onChange:function(e){return v(e)},"aria-describedby":"component-helper-text",required:!0}),Object(j.jsx)(G.a,{id:"component-helper-text",children:"Some important helper text"})]})}),Object(j.jsx)(p.a,{children:Object(j.jsxs)(J.a,{className:r.formWidth,children:[Object(j.jsx)(M.a,{htmlFor:"component-helper",children:"Password"}),Object(j.jsx)(V.a,{id:"component-helper",type:"password",name:"password",placeholder:"Password",value:g,onChange:function(e){return v(e)},minLength:"6","aria-describedby":"component-helper-text",required:!0}),Object(j.jsx)(G.a,{id:"component-helper-text",children:"Some important helper text"})]})}),Object(j.jsx)(l.a,{className:r.loginButton,variant:"outlined",color:"primary",type:"submit",children:"Login"}),Object(j.jsxs)(d.a,{variant:"body2",children:["Don't have an account? ",Object(j.jsx)(s.b,{to:"/signup",children:"Sign Up"})]}),Object(j.jsxs)(d.a,{variant:"body2",children:["Forgot your password? ",Object(j.jsx)(s.b,{to:"/reset-password",children:"Reset Password"})]})]})]})})})),K=Object(u.a)((function(e){return{root:{marginTop:"5px",alignItems:"center"},heroContent:{backgroundColor:"#bbdefb",padding:e.spacing(8,0,6)},formWidth:{width:"400px",margin:"15px"},signupButton:{width:"200px",margin:"20px"}}})),Q=Object(g.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{signup:function(e,t,n,a){return function(){var r=Object(w.a)(y.a.mark((function r(c){var o,s,i;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={headers:{"Content-Type":"application/json"}},s=JSON.stringify({name:e,email:t,password:n,re_password:a}),r.prev=2,r.next=5,C.a.post("".concat("http://localhost:8000","/auth/users/"),s,o);case 5:i=r.sent,c({type:k,payload:i.data}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),c({type:A});case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.signup,n=e.isAuthenticated,r=K(),c=Object(a.useState)(!1),o=Object(f.a)(c,2),u=(o[0],o[1]),m=Object(a.useState)({name:"",email:"",password:"",re_password:""}),b=Object(f.a)(m,2),g=b[0],v=b[1],y=g.name,w=g.email,S=g.password,C=g.re_password,N=function(e){return v(Object(O.a)(Object(O.a)({},g),{},Object(x.a)({},e.target.name,e.target.value)))};return n?Object(j.jsx)(i.a,{to:"/"}):Object(j.jsx)("div",{className:r.heroContent,children:Object(j.jsxs)(h.a,{maxWidth:"sm",align:"center",children:[Object(j.jsx)(d.a,{variant:"h2",style:{marginBottom:"40px"},children:"Sign up"}),Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),S===C&&(t(y,w,S,C),u(!0))}(e)},className:r.root,noValidate:!0,autoComplete:"off",children:[Object(j.jsx)(p.a,{children:Object(j.jsxs)(J.a,{className:r.formWidth,children:[Object(j.jsx)(M.a,{htmlFor:"component-helper",children:"Name"}),Object(j.jsx)(V.a,{id:"component-helper",type:"text",name:"name",placeholder:"Name*",value:y,onChange:function(e){return N(e)},"aria-describedby":"component-helper-text",required:!0}),Object(j.jsx)(G.a,{id:"component-helper-text",children:"Some important helper text"})]})}),Object(j.jsx)(p.a,{children:Object(j.jsxs)(J.a,{className:r.formWidth,children:[Object(j.jsx)(M.a,{htmlFor:"component-helper",children:"Email"}),Object(j.jsx)(V.a,{id:"component-helper",type:"email",name:"email",placeholder:"Email*",value:w,onChange:function(e){return N(e)},"aria-describedby":"component-helper-text",required:!0}),Object(j.jsx)(G.a,{id:"component-helper-text",children:"Some important helper text"})]})}),Object(j.jsx)(p.a,{children:Object(j.jsxs)(J.a,{className:r.formWidth,children:[Object(j.jsx)(M.a,{htmlFor:"component-helper",children:"Password"}),Object(j.jsx)(V.a,{id:"component-helper",type:"password",name:"password",placeholder:"Password*",value:S,onChange:function(e){return N(e)},minLength:"6","aria-describedby":"component-helper-text",required:!0}),Object(j.jsx)(G.a,{id:"component-helper-text",children:"Some important helper text"})]})}),Object(j.jsx)(p.a,{children:Object(j.jsxs)(J.a,{className:r.formWidth,children:[Object(j.jsx)(M.a,{htmlFor:"component-helper",children:"Confirm Password"}),Object(j.jsx)(V.a,{id:"component-helper",type:"password",name:"re_password",placeholder:"Confirm Password*",value:C,onChange:function(e){return N(e)},minLength:"6","aria-describedby":"component-helper-text",required:!0}),Object(j.jsx)(G.a,{id:"component-helper-text",children:"Some important helper text"})]})}),Object(j.jsx)(l.a,{className:r.signupButton,variant:"outlined",color:"primary",type:"submit",children:"Register"}),Object(j.jsxs)(d.a,{variant:"body2",children:["Already have an account? ",Object(j.jsx)(s.b,{to:"/login",children:"Sign In"})]})]})]})})})),X=Object(u.a)((function(e){return{root:{marginTop:"5px",alignItems:"center"},heroContent:{backgroundColor:"#bbdefb",padding:e.spacing(8,0,6)},title:{marginBottom:"20px"},verifyButton:{width:"200px",margin:"20px"}}})),Y=Object(g.b)(null,{verify:function(e,t){return function(){var n=Object(w.a)(y.a.mark((function n(a){var r,c;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({uid:e,token:t}),n.prev=2,n.next=5,C.a.post("".concat("http://localhost:8000","/auth/users/activation/"),c,r);case 5:a({type:I}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),a({type:L});case 11:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.verify,n=e.match,r=X(),c=Object(a.useState)(!1),o=Object(f.a)(c,2),s=o[0],p=o[1];return s?Object(j.jsx)(i.a,{to:"/"}):Object(j.jsx)("div",{className:r.heroContent,children:Object(j.jsxs)(h.a,{maxWidth:"sm",align:"center",children:[Object(j.jsx)(d.a,{variant:"h3",component:"h3",className:r.title,children:"Verify your Account"}),Object(j.jsx)(l.a,{className:r.verifyButton,color:"primary",variant:"outlined",onClick:function(e){var a=n.params.uid,r=n.params.token;t(a,r),p(!0)},children:"Verify"})]})})})),Z=Object(u.a)((function(e){return{root:{marginTop:"5px",alignItems:"center"},heroContent:{backgroundColor:"#bbdefb",padding:e.spacing(8,0,6)},formWidth:{width:"400px",margin:"15px"},loginButton:{width:"200px",margin:"20px"}}})),$=Object(g.b)(null,{reset_password:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(n){var a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e}),t.prev=2,t.next=5,C.a.post("".concat("http://localhost:8000","/auth/users/reset_password/"),r,a);case 5:n({type:B}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),n({type:P});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.reset_password,n=Z(),r=Object(a.useState)(!1),c=Object(f.a)(r,2),o=c[0],s=c[1],u=Object(a.useState)({email:""}),m=Object(f.a)(u,2),b=m[0],g=m[1],v=b.email;return o?Object(j.jsx)(i.a,{to:"/"}):Object(j.jsx)("div",{className:n.heroContent,children:Object(j.jsxs)(h.a,{maxWidth:"sm",align:"center",children:[Object(j.jsx)(d.a,{variant:"h2",style:{marginBottom:"40px"},children:"Request Password Reset"}),Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(v),s(!0)}(e)},className:n.root,noValidate:!0,autoComplete:"off",children:[Object(j.jsx)(p.a,{children:Object(j.jsxs)(J.a,{className:n.formWidth,children:[Object(j.jsx)(M.a,{htmlFor:"component-helper",children:"Email"}),Object(j.jsx)(V.a,{id:"component-helper",type:"email",name:"email",placeholder:"Email",value:v,onChange:function(e){return function(e){return g(Object(O.a)(Object(O.a)({},b),{},Object(x.a)({},e.target.name,e.target.value)))}(e)},"aria-describedby":"component-helper-text",required:!0}),Object(j.jsx)(G.a,{id:"component-helper-text",children:"Some important helper text"})]})}),Object(j.jsx)(l.a,{className:n.loginButton,variant:"outlined",color:"primary",type:"submit",children:"Reset Password"})]})]})})})),ee=Object(u.a)((function(e){return{root:{marginTop:"5px",alignItems:"center"},heroContent:{backgroundColor:"#bbdefb",padding:e.spacing(8,0,6)},formWidth:{width:"400px",margin:"15px"},loginButton:{width:"200px",margin:"20px"}}})),te=Object(g.b)(null,{reset_password_confirm:function(e,t,n,a){return function(){var r=Object(w.a)(y.a.mark((function r(c){var o,s;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={headers:{"Content-Type":"application/json"}},s=JSON.stringify({uid:e,token:t,new_password:n,re_new_password:a}),r.prev=2,r.next=5,C.a.post("".concat("http://localhost:8000","/auth/users/reset_password_confirm/"),s,o);case 5:c({type:R}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),c({type:D});case 11:case"end":return r.stop()}}),r,null,[[2,8]])})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.match,n=e.reset_password_confirm,r=ee(),c=Object(a.useState)(!1),o=Object(f.a)(c,2),s=o[0],d=o[1],u=Object(a.useState)({new_password:"",re_new_password:""}),m=Object(f.a)(u,2),b=m[0],g=m[1],v=b.new_password,y=b.re_new_password,w=function(e){return g(Object(O.a)(Object(O.a)({},b),{},Object(x.a)({},e.target.name,e.target.value)))};return s?Object(j.jsx)(i.a,{to:"/"}):Object(j.jsx)("div",{className:r.heroContent,children:Object(j.jsx)(h.a,{maxWidth:"sm",align:"center",children:Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var a=t.params.uid,r=t.params.token;n(a,r,v,y),d(!0)}(e)},className:r.root,noValidate:!0,autoComplete:"off",children:[Object(j.jsx)(p.a,{children:Object(j.jsxs)(J.a,{className:r.formWidth,children:[Object(j.jsx)(M.a,{htmlFor:"component-helper",children:"New Password"}),Object(j.jsx)(V.a,{id:"component-helper",type:"password",name:"new_password",placeholder:"New Password",value:v,onChange:function(e){return w(e)},minLength:"6","aria-describedby":"component-helper-text",required:!0}),Object(j.jsx)(G.a,{id:"component-helper-text",children:"Some important helper text"})]})}),Object(j.jsx)(p.a,{children:Object(j.jsxs)(J.a,{className:r.formWidth,children:[Object(j.jsx)(M.a,{htmlFor:"component-helper",children:"Confirm New Password"}),Object(j.jsx)(V.a,{id:"component-helper",type:"password",name:"re_new_password",placeholder:"Confirm New Password",value:y,onChange:function(e){return w(e)},minLength:"6","aria-describedby":"component-helper-text",required:!0}),Object(j.jsx)(G.a,{id:"component-helper-text",children:"Some important helper text"})]})}),Object(j.jsx)(l.a,{className:r.loginButton,variant:"outlined",color:"primary",type:"submit",children:"Reset Password"})]})})})})),ne=n(26),ae=n(68),re=n(69),ce={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:null,user:null},oe=Object(ne.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case W:return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!0});case N:return localStorage.setItem("access",a.access),Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!0,access:a.access,refresh:a.refresh});case k:return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!1});case E:return Object(O.a)(Object(O.a)({},e),{},{user:a});case F:return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!1});case T:return Object(O.a)(Object(O.a)({},e),{},{user:null});case _:case A:case U:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(O.a)(Object(O.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null});case B:case P:case R:case D:case I:case L:return Object(O.a)({},e);default:return e}}}),se=[re.a],ie=Object(ne.createStore)(oe,{},Object(ae.composeWithDevTools)(ne.applyMiddleware.apply(void 0,se))),le=n(134),pe=n(129),de=Object(u.a)((function(e){return{root:{flexGrow:1},navLink:{color:"black"}}})),ue=Object(g.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(e){return function(e){e({type:U})}}})((function(e){var t=e.logout,n=e.isAuthenticated,r=de();return Object(j.jsx)("div",{className:r.root,children:Object(j.jsx)(le.a,{position:"static",style:{backgroundColor:"#64b5f6",marginBottom:"1px"},children:Object(j.jsxs)(pe.a,{children:[Object(j.jsx)(l.a,{component:s.c,className:r.navLink,to:"/",style:{color:"#fafafa"},children:"Home"}),n?Object(j.jsx)(a.Fragment,{children:Object(j.jsx)(l.a,{onClick:t,className:r.navLink,style:{color:"#fafafa"},children:"Logout"})}):Object(j.jsxs)(a.Fragment,{children:[Object(j.jsx)(l.a,{component:s.c,className:r.navLink,to:"/login",style:{color:"#fafafa"},children:"Login"}),Object(j.jsx)(l.a,{component:s.c,className:r.navLink,to:"/signup",style:{color:"#fafafa"},children:"Signup"})]})]})})})})),he=Object(g.b)(null,{checkAuthenticatd:function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=15;break}return n={headers:{"Content-Type":"application/json",Accept:"application/json"}},a=JSON.stringify({token:localStorage.getItem("access")}),e.prev=3,e.next=6,C.a.post("".concat("http://localhost:8000","/auth/jwt/verify/"),a,n);case 6:"token_not_valid"!==e.sent.data.code&&t({type:W}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:F});case 13:e.next=16;break;case 15:t({type:F});case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},load_user:q})((function(e){return Object(a.useEffect)((function(){e.checkAuthenticatd(),e.load_user()}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)(ue,{}),e.children]})})),je=function(){return Object(j.jsx)(g.a,{store:ie,children:Object(j.jsx)(s.a,{children:Object(j.jsx)(he,{children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/",component:b}),Object(j.jsx)(i.b,{exact:!0,path:"/login",component:z}),Object(j.jsx)(i.b,{exact:!0,path:"/signup",component:Q}),Object(j.jsx)(i.b,{exact:!0,path:"/reset-password",component:$}),Object(j.jsx)(i.b,{exact:!0,path:"/password/reset/confirm/:uid/:token",component:te}),Object(j.jsx)(i.b,{exact:!0,path:"/activate/:uid/:token",component:Y})]})})})})};o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(je,{})}),document.getElementById("root"))}},[[102,1,2]]]);
//# sourceMappingURL=main.1b9b5a1b.chunk.js.map